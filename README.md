# Assembly Audio Editor - Refactored Prototype

A modular, component-based audio editor prototype designed for Unity game integration. This prototype provides a clean, maintainable codebase with separation of concerns and configuration-driven architecture.

## üéØ Overview

Assembly is a multi-track audio editor prototype that simulates the experience of being an audio engineer. The interface is inspired by professional DAWs (Digital Audio Workstations) like Ableton Live, Logic Pro, and GarageBand, but designed to be accessible and game-like.

## üèóÔ∏è Architecture

### Modular Component System

The codebase has been refactored into a clean, modular architecture:

```
imprinted-assembly/
‚îú‚îÄ‚îÄ index.html          # Main HTML structure (minimal)
‚îú‚îÄ‚îÄ styles.css          # Centralized styles with CSS custom properties
‚îú‚îÄ‚îÄ config.js           # Configuration and project data
‚îú‚îÄ‚îÄ components.js       # Reusable UI components
‚îú‚îÄ‚îÄ app.js             # Main application logic
‚îú‚îÄ‚îÄ server.js          # Logging server (unchanged)
‚îî‚îÄ‚îÄ logs/              # Debug logs (generated)
```

### Key Design Principles

- **Separation of Concerns**: HTML structure, CSS styling, and JavaScript logic are completely separated
- **Configuration-Driven**: All project data and UI configuration is centralized in `config.js`
- **Component-Based**: UI is built from reusable, self-contained components
- **Assert-Heavy**: Extensive use of assertions to catch configuration errors early
- **Maintainable**: Clean, well-documented code optimized for readability

## üöÄ Features

### Current Functionality
- **Project Selection**: Choose from 4 different audio projects/puzzles
- **Transport Controls**: Play, pause, stop, rewind, fast forward, loop toggle
- **Track Management**: Mute, solo, rename tracks
- **Clip Repository**: Organized by instrument categories with drag-and-drop
- **Timeline View**: Multi-track timeline with grid snapping
- **Real-time Updates**: Dynamic UI updates based on project data

### Project Types
1. **Sentence Puzzle**: Arrange text clips to form a complete sentence
2. **Band Arrangement**: Choose one clip per instrument to build a band
3. **Ambient Sandbox**: Free-form arrangement with track management
4. **The Song**: Content-only arrangement without special mechanics

## üõ†Ô∏è Development

### Prerequisites
- Modern web browser with ES6 module support
- Node.js (for logging server)

### Setup
1. **Start the logging server** (required for debugging):
   ```bash
   node server.js
   ```

2. **Open the application**:
   - Open `index.html` in your browser
   - The application will automatically initialize

### File Structure

#### `index.html`
Minimal HTML structure with component placeholders. All content is dynamically generated by JavaScript components.

#### `styles.css`
Centralized stylesheet using CSS custom properties for consistent theming:
- Dark theme with sky blue accent colors
- Responsive design optimized for desktop
- Accessibility features and keyboard navigation
- Custom scrollbars and animations

#### `config.js`
Configuration-driven approach with:
- **PROJECT_CONFIG**: UI layout, theme, and component settings
- **PROJECT_DATA**: Complete project definitions with tracks and clips
- **CLIP_CATEGORIES**: Instrument categories with icons and colors
- **Validation**: Automatic configuration validation on load

#### `components.js`
Modular component system:
- **Component**: Base class with lifecycle management
- **HeaderComponent**: Menu bar with project selection
- **SidebarComponent**: Transport controls and clip repository
- **TimelineComponent**: Multi-track timeline with drag-and-drop
- **VUMeterComponent**: Visual level meter

#### `app.js`
Main application orchestrator:
- **AssemblyApp**: Main application class
- **BrowserLogger**: Debug logging system (preserved from original)
- **Event Handling**: Centralized event management
- **State Management**: Project and playback state

## üé® UI Components

### Header
- Application title and logo
- Project selection dropdown
- Menu items (Save, Analyze, etc. - placeholders)
- Window controls (minimize, maximize, close)

### Sidebar
- File information display
- Transport controls (play, stop, rewind, fast forward, loop)
- Clip repository organized by instrument categories
- Drag-and-drop support for clips

### Timeline
- Time ruler with beat/bar markers
- Multi-track view with individual track controls
- Grid-based snapping system
- Clip positioning and resizing
- Add track functionality (for ambient project)

### VU Meter
- Real-time level visualization
- Animated meter display
- Stereo channel indicators

## üîß Configuration

### Adding New Projects
1. Add project data to `PROJECT_DATA` in `config.js`
2. Define tracks with clips and timing
3. Set BPM and project-specific settings
4. The UI will automatically update

### Customizing Themes
1. Modify CSS custom properties in `styles.css`
2. Update color palette in `PROJECT_CONFIG.theme.colors`
3. Adjust layout constants as needed

### Adding New Clip Categories
1. Add category definition to `CLIP_CATEGORIES`
2. Include icon, name, and color
3. Update project data to use new category

## üêõ Debugging

### Logging System
The application includes a comprehensive logging system:
- Console output capture with call stacks
- DOM state snapshots
- Network transmission to local server
- File-based storage in `logs/` directory

### Browser Console
- All application events are logged
- Configuration validation results
- Component lifecycle events
- Error handling and recovery

## üìã Development Guidelines

### Code Style
- Use descriptive variable and function names
- Include JSDoc comments for complex functions
- Follow consistent indentation and formatting
- Use assertions to document assumptions

### Component Development
- Extend the base `Component` class
- Implement `init()`, `render()`, and `destroy()` methods
- Use event delegation for user interactions
- Clean up resources in `destroy()` method

### Configuration Management
- All magic numbers should be in `PROJECT_CONFIG`
- Use validation functions to catch errors early
- Provide meaningful error messages
- Keep configuration data separate from logic

## üîÆ Future Enhancements

### Planned Features
- Audio file integration and playback
- Waveform visualization
- Advanced clip editing tools
- Project saving and loading
- Undo/redo functionality
- Keyboard shortcuts

### Unity Integration
- WebGL export for Unity
- Real-time audio processing
- Game state synchronization
- Performance optimization

## üìÑ License

This prototype is part of the Assembly audio editor project for Unity game integration.

## ü§ù Contributing

When contributing to this codebase:
1. Follow the established component architecture
2. Add assertions for new configuration options
3. Update documentation for new features
4. Maintain the logging system for debugging
5. Test across different project types

---

**Note**: This is a prototype focused on UI/UX design. Audio playback and file handling are simulated for demonstration purposes. 